(function(e){function t(t){for(var a,s,o=t[0],i=t[1],u=t[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],a=!0,o=1;o<r.length;o++){var i=r[o];0!==n[i]&&(a=!1)}a&&(c.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},c=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=i;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"3fbe":function(e,t,r){},"4bfd":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("header-component"),r("main-component"),r("footer-component"),r("modal",{class:{hidden:e.hideModal}})],1)},c=[],s=r("5530"),o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("h1",{staticClass:"title"},[e._v("Characters encyclopedia")])])}],u={},l=u,d=(r("a106"),r("2877")),f=Object(d["a"])(l,o,i,!1,null,"7664002e",null),p=f.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("footer",[e._v("STAR WARS CHARACTER Encyclopedia, 2019")])},m=[],v={},g=v,_=(r("5ec4"),Object(d["a"])(g,h,m,!1,null,"8be869dc",null)),b=_.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("preloader",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),r("search-form",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]}),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"cards-container"},e._l(e.characters,(function(e){return r("card",{key:e.url,attrs:{name:e.name,species:e.species,avatarText:e.name.charAt(0),url:e.url}})})),1)],1)},C=[],x=r("2f62"),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"search-form",on:{submit:function(t){return t.preventDefault(),e.onSearch(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"inputSearch",staticClass:"search-form__input",attrs:{placeholder:"Search by name"},domProps:{value:e.input},on:{keyup:e.onSearch,input:function(t){t.target.composing||(e.input=t.target.value)}}}),r("i",{staticClass:"fas fa-search search-form__icon",on:{click:e.onSearch}})])},O=[],j=r("e8be"),$=r.n(j),k={data:function(){return{input:""}},methods:{onSearch:function(e){13!==e.keyCode&&"I"!==e.target.tagName||this.$store.dispatch("getCharacters",e.target.value)},focus:function(){this.$refs.inputSearch.focus()}},watch:{input:$()((function(e){this.$store.dispatch("getCharacters",e)}),500)},updated:function(){setInterval(this.focus,500)}},P=k,E=(r("aa58"),Object(d["a"])(P,y,O,!1,null,"138070a8",null)),L=E.exports,M=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},S=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"preloader"},[r("div",{staticClass:"preloader__falcon"})])}],A={},R=A,T=(r("a681"),Object(d["a"])(R,M,S,!1,null,"5017999f",null)),N=T.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"character-card",on:{click:e.toggleModal}},[r("div",{staticClass:"character-card__content"},[r("i",{staticClass:"avatar",style:{background:e.colorAvatar}},[r("b",{staticClass:"avatar__text"},[e._v(e._s(e.avatarText))])]),r("h2",{staticClass:"character-card__title"},[e._v(e._s(e.name))]),r("p",{staticClass:"character-card__description"},[e._v(e._s(e.species))])])])},W=[],D=(r("d3b7"),r("25f0"),r("96cf"),r("1da1")),F={props:["name","species","avatarText","url"],data:function(){return{colorAvatar:"#"+Math.random().toString(16).substr(-6)}},methods:{toggleModal:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getCharacter",e.url);case 2:e.$store.dispatch("toggleModal",!1),e.$store.dispatch("setCurrentColorAvatar",e.colorAvatar);case 4:case"end":return t.stop()}}),t)})))()}}},B=F,G=(r("a95a"),Object(d["a"])(B,H,W,!1,null,"f4839e1a",null)),I=G.exports,J={data:function(){return{}},computed:Object(s["a"])({},Object(x["b"])(["loading","characters"])),components:{searchForm:L,preloader:N,card:I}},U=J,q=(r("7d47"),Object(d["a"])(U,w,C,!1,null,"dd8e225c",null)),z=q.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal"},[r("a",{staticClass:"overlay"}),r("div",{staticClass:"popup"},[r("a",{staticClass:"popup__close",attrs:{title:"Закрыть"},on:{click:e.toggleModal}},[e._v("⨯")]),r("div",{staticClass:"popup__header"},[r("i",{staticClass:"avatar",style:{background:e.currentColorAvatar}},[r("b",{staticClass:"avatar__text"},[e._v(e._s(e.character.name.charAt(0)))])]),r("span",{staticClass:"header-title"},[e._v(e._s(e.character.name))])]),r("ul",{staticClass:"popup__details"},[r("li",{staticClass:"item"},[e._m(0),r("div",{staticClass:"item__value"},[e._v(e._s(e.character.birth_year))])]),r("li",{staticClass:"item"},[e._m(1),r("div",{staticClass:"item__value"},[e._v(e._s(e.character.species))])]),r("li",{staticClass:"item"},[e._m(2),r("div",{staticClass:"item__value"},[e._v(e._s(e.character.gender))])]),r("li",{staticClass:"item"},[e._m(3),r("div",{staticClass:"item__value"},[e._v(e._s(e.character.homeworld))])]),r("li",[e._m(4),e._l(e.character.films,(function(t){return r("div",{key:t,staticClass:"value-film"},[e._v(e._s(t))])}))],2)])])])},Q=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item__prop"},[a("img",{attrs:{src:r("68ff"),alt:"Birth year"}}),e._v(" Birth year ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item__prop"},[a("img",{attrs:{src:r("e707"),alt:"Species"}}),e._v(" Species ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item__prop"},[a("img",{attrs:{src:r("878b"),alt:"Gender"}}),e._v(" Gender ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item__prop"},[a("img",{attrs:{src:r("eefc"),alt:"Homeworld"}}),e._v(" Homeworld ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"prop-film"},[a("img",{attrs:{src:r("b1c4"),alt:"Films"}}),e._v(" Films ")])}],V={computed:Object(s["a"])({},Object(x["b"])(["character","currentColorAvatar"])),methods:{toggleModal:function(){this.$store.dispatch("toggleModal",!0)}}},X=V,Y=(r("65ff"),Object(d["a"])(X,K,Q,!1,null,"1b0d89e4",null)),Z=Y.exports,ee={name:"app",data:function(){return{}},computed:Object(s["a"])({},Object(x["b"])(["hideModal"])),components:{headerComponent:p,footerComponent:b,mainComponent:z,modal:Z}},te=ee,re=Object(d["a"])(te,n,c,!1,null,null,null),ae=re.exports,ne=(r("99af"),r("4de4"),r("4160"),r("d81d"),r("b0c0"),r("3ca3"),r("159b"),r("ddb0"),r("2b3d"),r("d4ec")),ce=r("bee2"),se="https://swapi.dev/api/people",oe=function(e){if(e.ok)return e;throw new Error("".concat(e.status,": ").concat(e.statusText))},ie=function(e){return e.json()},ue=function(){function e(){Object(ne["a"])(this,e)}return Object(ce["a"])(e,null,[{key:"loadData",value:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="",t&&(a=new URLSearchParams,a.append("search",t),r="/?".concat(a.toString())),e.prev=2,e.t0=oe,e.next=6,fetch("".concat(se).concat(r));case 6:e.t1=e.sent,c=(0,e.t0)(e.t1),n=ie(c),e.next=14;break;case 11:throw e.prev=11,e.t2=e["catch"](2),new Error(e.t2.message);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"load",value:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=oe,e.next=4,fetch(t);case 4:e.t1=e.sent,a=(0,e.t0)(e.t1),r=ie(a),e.next=12;break;case 9:throw e.prev=9,e.t2=e["catch"](0),new Error(e.t2.message);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();a["a"].use(x["a"]);var le=new x["a"].Store({state:{loading:!1,characters:[],filter:"",nextPage:"",hideModal:!0,character:{name:name},endLoad:!0,wait:2e3,currentColorAvatar:"#ffffff"},getters:{filter:function(e){return e.filter},loading:function(e){return e.loading},characters:function(e){return e.characters},nextPage:function(e){return e.nextPage},hideModal:function(e){return e.hideModal},character:function(e){return e.character},endLoad:function(e){return e.onLoad},wait:function(e){return e.wait},currentColorAvatar:function(e){return e.currentColorAvatar}},mutations:{setLoading:function(e,t){e.loading=t},setCharacters:function(e,t){e.characters=t},addCharacters:function(e,t){e.characters=e.characters.concat(t)},setNextPage:function(e,t){e.nextPage=t},setfilter:function(e,t){e.filter=t},toggleModal:function(e,t){e.hideModal=t},setCharacter:function(e,t){e.character={name:t.name,birth_year:t.birth_year,species:t.species,gender:t.gender,homeworld:t.homeworld,films:t.films}},endLoad:function(e,t){e.endLoad=t},setWait:function(e,t){e.wait=t},setColor:function(e,t){e.currentColorAvatar=t}},actions:{toggleModal:function(e,t){var r=e.commit;r("toggleModal",t)},onLoad:function(e){var t=e.commit,r=e.state,a=e.dispatch;if(t("setLoading",!0),r.endLoad)return t("setLoading",!1),void t("setWait",2e3);setTimeout((function(){t("setWait",500),a("onLoad")}),r.wait)},getCharacters:function(e,t){var r=e.commit,a=e.dispatch;return Object(D["a"])(regeneratorRuntime.mark((function e(){var n,c,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r("setfilter",t),r("endLoad",!1),a("onLoad"),e.prev=3,e.next=6,ue.loadData(t);case 6:return n=e.sent,c=n.results.map((function(e){return e.species.length>0?ue.load(e.species):Promise.resolve("")})),e.next=10,Promise.all(c);case 10:for(s=e.sent,o=0;o<s.length;o++)n.results[o].species=s[o].name;r("setCharacters",n.results),t||r("setNextPage",n.next);case 14:return e.prev=14,r("endLoad",!0),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,,14,17]])})))()},addCharacters:function(e){var t=e.commit,r=e.dispatch,a=e.getters,n=e.state;return Object(D["a"])(regeneratorRuntime.mark((function e(){var c,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==n.nextPage&&!a.filter){e.next=2;break}return e.abrupt("return");case 2:return t("endLoad",!1),r("onLoad"),e.prev=4,e.next=7,ue.load(n.nextPage);case 7:return c=e.sent,s=c.results.map((function(e){return e.species.length>0?ue.load(e.species):Promise.resolve("")})),e.next=11,Promise.all(s);case 11:for(o=e.sent,i=0;i<o.length;i++)c.results[i].species=o[i].name;t("setNextPage",c.next),t("addCharacters",c.results);case 15:return e.prev=15,t("endLoad",!0),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,,15,18]])})))()},getCharacter:function(e,t){var r=e.commit;return Object(D["a"])(regeneratorRuntime.mark((function e(){var a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r("endLoad",!1),r("setLoading",!0),e.prev=2,e.next=5,ue.load(t);case 5:return a=e.sent,n=a.films.map((function(e){return ue.load(e)})),n.push(a.species.length>0?ue.load(a.species):Promise.resolve("")),n.push(a.homeworld.length>0?ue.load(a.homeworld):Promise.resolve("")),e.next=11,Promise.all(n);case 11:c=e.sent,a.films=[],c.forEach((function(e){e.title&&a.films.push(e.title)})),a.species=c[c.length-2].name,a.homeworld=c[c.length-1].name,r("setCharacter",a),e.next=22;break;case 19:throw e.prev=19,e.t0=e["catch"](2),new Error(e.t0.message);case 22:return e.prev=22,r("endLoad",!0),r("setLoading",!1),e.finish(22);case 26:case"end":return e.stop()}}),e,null,[[2,19,22,26]])})))()},setCurrentColorAvatar:function(e,t){var r=e.commit;r("setColor",t)}}});a["a"].config.productionTip=!1,new a["a"]({store:le,render:function(e){return e(ae)},created:function(){var e=this;this.$store.dispatch("getCharacters"),window.onscroll=function(){var t=document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight;t&&e.$store.state.endLoad&&e.$store.dispatch("addCharacters")}}}).$mount("#app")},"5a9a":function(e,t,r){},"5ec4":function(e,t,r){"use strict";var a=r("d459"),n=r.n(a);n.a},"65ff":function(e,t,r){"use strict";var a=r("6ed8"),n=r.n(a);n.a},"68ff":function(e,t,r){e.exports=r.p+"img/birthyear-icon.30be9838.svg"},"6ed8":function(e,t,r){},"7bcd":function(e,t,r){},"7d47":function(e,t,r){"use strict";var a=r("3fbe"),n=r.n(a);n.a},"878b":function(e,t,r){e.exports=r.p+"img/gender-icon.ef18b62c.svg"},a106:function(e,t,r){"use strict";var a=r("a8a0"),n=r.n(a);n.a},a681:function(e,t,r){"use strict";var a=r("5a9a"),n=r.n(a);n.a},a8a0:function(e,t,r){},a95a:function(e,t,r){"use strict";var a=r("7bcd"),n=r.n(a);n.a},aa58:function(e,t,r){"use strict";var a=r("4bfd"),n=r.n(a);n.a},b1c4:function(e,t,r){e.exports=r.p+"img/films-icon.265605f0.svg"},d459:function(e,t,r){},e707:function(e,t,r){e.exports=r.p+"img/species-icon.3e5a5cac.svg"},e8be:function(e,t){e.exports=function(e,t){var r=null;return function(){clearTimeout(r);var a=arguments,n=this;r=setTimeout((function(){e.apply(n,a)}),t)}}},eefc:function(e,t,r){e.exports=r.p+"img/homeworld-icon.9ca26f24.svg"}});
//# sourceMappingURL=app.066d571a.js.map